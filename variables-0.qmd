---
title: "Стовпчики таблиці даних (змінні)"
author: Олександр Виноградов
lang: uk-UA
format: html
editor: visual
---

## Середовища і пакети

Пакет

## Сценарії і записники

Довільний текст разом з кодом і результатами його виконання.

## Функції

ім'я, аргументи, імена і порядок аргументів, значення аргументів за замовчанням, три крапки, значення, яке функція повертає, побічний результат, тіло функції, область видимості.

Як розібратися з функціями по підказкам.

## Кількісні змінні

Кількісний вектор з послідовних цілих чисел можна створити за допомогою функції двокрапка:

```{r}
idno <- 1 : 100
idno
```

Довільну послідовність значень (чисел, рядків, дат, логічних значень) створюють за допомогою функції **c()** (зверніть увагу: це **латинська** літера в нижньому регістрі!)

```{r}
# Це пояснюючий коментар. Він починається символом гратки (фунта, хештега)
age <- c(16, 18, 17, 17, 17, 21, 18, 19, 19, 17)

# Так вміст об'єкту можна вивести на пристрій (наприклад, на екран або у файл)
print(age)
age
```

```{r}
## Іменований вектор. Колжне значення має своє унікальне ім'я
## Для Дарини вік невідомий

age <- c(
  Андрій = 16, Анжела = 18, Божена = 17, Власта = 17, Богдан = 17, 
  Галина = 21, Василь = 18, Гордій = 19, Дмитро = 19, Дарина = NA
)
```

Виведення вмісту вектора на пристрій (екран):

```{r}
age
```

Імена складових вектора можна отримати за допомогою функції **names(**). Вона повертає вектор рядкових значень (character). Цю ж функцію використовують і для того, щоб приписати імена складовим об'єкту

```{r}
names(age)
```

Деякі категоріальні змінні, які можуть приймати тільки два значення (вони називаються *дихтомічними* або *бінарними*, можна подавати як кількісні змінні 0/1:

```{r}
## Створимо дихотомічну змінну Male
Male <- c(1, 0, 0, 0, 1, 0, 1, 1, 1, 0)

## Прив'яжемо до складових ті самі імена, що й у векторі віку
names(Male) <- names(age)

Male
```

Дії з кількісними векторами

```{r}
## Обчислення середнього арифметичного
mean(age, na.rm = TRUE)
mean(Male, na.rm = TRUE)

## Відхилення від середнього віку
age - 18
```

## Фактори

Стать

```{r}
## Перетворимо кількісну змінну на категоріальну номінальну
## FALSE і TRUE -- логічні значення: "ні" / "так"
gender <- factor(
  x = Male,
  levels = 0:1,
  labels = c("Чоловік", "Жінка"),
  ordered = FALSE 
)

## Операції для кількісних змінних виводять попередження
mean(gender, na.rm = TRUE)

## Для категоріальних змінних можна вивести таблицю розподілу частот
table(gender)
```

Атрибути (властивості) об'єктів. У фактора gender їх три: імена спостережень, мітки рівнів та клас об'єкту:

```{r}
attributes(gender)
```

Зазирнути всередину об'єкту і дізнатися його структуру можна за допомогою функції **str()**. Так, вектор gender є фактором з двома рівнями, а також має атрибут з іменем **names**.

```{r}
str(gender)
```

Мітки змінної і значень. Часто аналітику хочеться одночасно мати і кількісну змінну, й категоріальну в одному флаконі. Тоді інформацію про мітки рівнів можна зберігати всередині самого об'єкту і використовувати, коли буде потрібно:

```{r}
## Питання A1 з фактору A: "Мені начхати на почуття інших"
## Номери обраних варіантів відповіді

A1 <- c(2, 2, 5, 4, 2, 6, 2, 4, 4, 2)

## Іменований вектор з мітками варіантів відповіді
val_labels <- c(
  "Дуже неточно" = 1, "Помірно неточно" = 2, "Скоріше неточно" = 3, 
  "Скоріше точно" = 4, "Помірно точно" = 5, "Дуже точно" = 6
)

attr(A1, "label") <- "Мені начхати на почуття інших"
attr(A1, "labels") <- val_labels

str(A1)
```

Тепер деякі (не всі!) функції можуть використовувати цю інформацію при виведенні результатів. Також при необхідності мітки значень можна використати для перетворення кількісної змінної на категоріальну за допомогою спеціальних функцій.

```{r}
## тут я підключаю пакет, який спочатку потрібно інсталювати
library(sjmisc, quietly = TRUE)

## Вивести інформативну таблицю частот
frq(A1)
```

Візуалізація розподілу кількісної змінної: коробчатий графік

```{r}
boxplot(age, horizontal = TRUE)
```

Точкова діаграма

```{r}
stripchart(
  x = age, method = "stack",
  offset = 0.5, at = 0
)
```

Точковий графік Клівленда

```{r}
dotchart(age)
```

Знайома всім стовпчикова діаграма частот

```{r}
#| fig-cap: Стовпчикова діаграма частот
#| label: fig-barplot
barplot(
  height = table(age),
  col = c("orange", "cornflowerblue")
)
```
